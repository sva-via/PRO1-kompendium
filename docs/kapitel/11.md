# Kapitel 11 – At teste som tænkning

## 1. Introduktion

Test i PRO1 forstås ikke først og fremmest som et framework eller et værktøj. Test er en måde at tænke på.

Når vi tester, præciserer vi vores forståelse af objektets ansvar og invariant. Vi spørger: Hvad skal være sandt? Hvornår brydes det?

## 2. Eksempler før kode

Før vi implementerer en metode, bør vi formulere konkrete eksempler.

Antag at vi skal implementere metoden isBefore i MyDate.

Eksempler:

- 1.1.2024 er før 2.1.2024
- 1.2.2024 er før 1.3.2024
- 1.1.2023 er før 1.1.2024
- 1.1.2024 er ikke før 1.1.2024

```
public boolean isBefore(MyDate other) {
    if (this.year != other.year) {
        return this.year < other.year;
    }
    if (this.month != other.month) {
        return this.month < other.month;
    }
    return this.day < other.day;
}
```
Eksemplerne fungerer som præcisering af kravene. De reducerer risikoen for forkert implementering.

## 3. Edge cases

Edge cases er situationer, der ligger i kanten af det normale domæne.

For MyDate kan det være:

- 29. februar i skudår
- 28. februar i ikke-skudår
- 31. december → næste dag

Edge cases afslører ofte mangler i design eller invariant.

```
MyDate d = new MyDate(2024, 2, 29);  // skudår
MyDate e = new MyDate(2023, 2, 29);  // bør give exception
```
Hvis edge cases ikke overvejes, kan objektet komme i ugyldig tilstand.

## 4. Boundary values

Boundary values er værdier ved grænserne for tilladt input.

For month gælder grænserne 1 og 12.

```
new MyDate(2024, 1, 1);   // gyldig
new MyDate(2024, 12, 31); // gyldig
new MyDate(2024, 0, 10);  // ugyldig
new MyDate(2024, 13, 10); // ugyldig
```
Test af boundary values sikrer, at valideringen er korrekt implementeret.

## 5. Gennemgående eksempel – Temperature

```
public class Temperature {

    private double value;

    public Temperature(double value) {
        if (value < -273.15) {
            throw new IllegalArgumentException("Below absolute zero");
        }
        this.value = value;
    }

    public double getValue() {
        return value;
    }
}
```
Boundary value er her -273.15. Test bør inkludere netop denne værdi og værdier lige omkring den.

## 6. Designovervejelser

Test tydeliggør ansvar og invariant.

Hvis det er svært at formulere testeksempler, er designet ofte uklart.

Test bør fokusere på:
- Korrekt adfærd
- Edge cases
- Boundary values
- Exceptions

## 7. Typiske fejl og misforståelser

1) Kun at teste 'happy path'.
2) At ignorere grænseværdier.
3) At teste implementeringsdetaljer i stedet for adfærd.
4) At skrive tests efter designet er fastlåst.

## 8. Refleksionsspørgsmål

1) Hvorfor bør eksempler formuleres før implementering?
2) Hvad kan edge cases afsløre om designet?
3) Hvorfor er boundary values særligt vigtige?

## 9. Små øvelser

Øvelse 1: Formulér testeksempler for metoden nextDay i MyDate.

Øvelse 2: Identificér edge cases for en Clock-klasse med timer 0–23.
