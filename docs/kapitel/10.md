# Kapitel 10 – Domænemodellering

## 1. Introduktion

Indtil nu har vi arbejdet med enkelte klasser og deres relationer. I dette kapitel samler vi trådene og ser på domænemodellering: hvordan vi går fra en kravtekst til et klassediagram.

Domænemodellering handler ikke om Java først. Det handler om at forstå begreberne i problemdomænet og deres ansvar.

## 2. Fra kravtekst til klassediagram

Udgangspunktet er ofte en tekst, fx:

“Systemet skal håndtere bøger i et bibliotek. En bog har en titel og en forfatter. En låner kan låne flere bøger. En bog kan være udlånt eller tilgængelig.”

Første skridt er ikke at skrive kode – men at identificere begreber.

Typiske substantiver i teksten peger på kandidater til klasser.

## 3. Identificér begreber

I ovenstående tekst kan vi identificere:
- Bog
- Forfatter
- Låner
- Bibliotek

Ikke alle substantiver bliver nødvendigvis klasser. Nogle kan være simple værdityper eller egenskaber.

Spørg:
- Har begrebet selvstændig identitet?
- Har det eget ansvar?
- Skal det samarbejde med andre objekter?

## 4. Identificér ansvar

Næste skridt er at tildele ansvar.

Eksempel:
- Bog: Kender sin titel og om den er udlånt
- Låner: Kender sine lånte bøger
- Bibliotek: Administrerer samlingen

Ansvar bør placeres dér, hvor informationen naturligt hører hjemme.

```
public class Book {

    private String title;
    private boolean loaned;

    public Book(String title) {
        this.title = title;
        this.loaned = false;
    }

    public void loanOut() {
        if (loaned) {
            throw new IllegalStateException("Already loaned");
        }
        loaned = true;
    }

    public boolean isLoaned() {
        return loaned;
    }
}
```
Her ligger ansvaret for udlånsstatus i Book – ikke i en ekstern hjælpeklasse.

## 5. Fra model til klassediagram

Når begreber og ansvar er identificeret, kan relationer tegnes i et UML-klassediagram.

Fx:
- Låner har 0..* bøger
- Bibliotek har mange bøger
- Bog har præcis én titel

Klassediagrammet visualiserer struktur – men erstatter ikke analyse.

## 6. Designovervejelser

Typiske faldgruber:
- At modellere databasen i stedet for domænet
- At fokusere på implementering før begreber
- At give én klasse for mange ansvar

God domænemodellering reducerer senere kompleksitet i implementeringen.

## 7. Typiske fejl og misforståelser

1) At springe analysen over og begynde at kode.
2) At vælge klassenavne ud fra tekniske hensyn.
3) At ignorere relationer mellem begreber.
4) At overse invariants i modellen.

## 8. Refleksionsspørgsmål

1) Hvordan kan du systematisk identificere kandidater til klasser?
2) Hvorfor bør ansvar diskuteres før implementering?
3) Hvad er forskellen på et klassediagram og en database-model?

## 9. Små øvelser

Øvelse 1: Modellér et simpelt kursussystem med Course, Student og Teacher.

Øvelse 2: Identificér ansvar i et system, hvor en ordre består af flere ordrelinjer.
